<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loan Request Form - SRCCS</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --maroon:#800000;
      --light:#a55252;
      --green:#1e9e55;
      --white:#fff;
      --muted:#555;
    }
    body{
      margin:0;
      font-family:'Poppins',sans-serif;
      background:linear-gradient(180deg,#fff,#fffaf2);
      color:#222;
    }

    header{
      background:linear-gradient(90deg,var(--maroon),var(--light));
      color:white;
      padding:18px 20px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .brand{display:flex;gap:16px;align-items:center}
    .logo{width:72px;height:72px;background:white;border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--maroon);font-weight:700}
    .titles{line-height:1}
    .titles h1{margin:0;font-size:20px}
    .titles p{margin:2px 0 0;font-size:13px;opacity:0.95}

    .container{
      max-width:650px;
      margin:40px auto;
      background:var(--white);
      padding:25px;
      border-radius:12px;
      box-shadow:0 4px 15px rgba(0,0,0,0.1);
    }
    h2{
      text-align:center;
      color:var(--maroon);
      font-family:'Merriweather',serif;
      margin-bottom:20px;
    }
    label{
      font-weight:600;
      display:block;
      margin-top:12px;
    }
    input, textarea{
      width:100%;
      padding:10px;
      margin-top:5px;
      border:1px solid #ccc;
      border-radius:8px;
      font-size:15px;
      transition:0.3s;
    }
    input:focus, textarea:focus{
      border-color:var(--maroon);
      box-shadow:0 0 6px rgba(128,0,0,0.3);
      outline:none;
    }
    button{
      margin-top:20px;
      width:100%;
      padding:12px;
      background:var(--green);
      color:white;
      font-size:16px;
      font-weight:600;
      border:none;
      border-radius:8px;
      cursor:pointer;
      transition:0.3s;
    }
    button:hover{
      background:#167a40;
      transform:translateY(-2px);
    }
    .success{
      text-align:center;
      font-weight:600;
      margin-top:15px;
    }

    footer{
      margin-top:30px;
      font-size:13px;
      color:white;
      padding:12px;
      text-align:center;
      background:var(--light);
    }

    @media(max-width:500px){
      header h1{font-size:18px}
      .titles p{font-size:12px}
      .container{padding:15px;}
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="brand">
      <div class="logo">SRCCS</div>
      <div class="titles">
        <h1>Shree Radha Credit Co-operative Society Ltd.</h1>
        <p>Loan Request Portal</p>
        <p style="font-size:12px;margin-top:6px;opacity:0.92">Reg. No: DR/DHR/151716</p>
      </div>
    </div>
  </header>

  <!-- Form -->
  <div class="container">
    <h2>üí∞ Loan Request Form (‡§≤‡•ã‡§® ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§´‡•â‡§∞‡•ç‡§Æ)</h2>
    <form id="loanForm">

      <label>Account Number (‡§ñ‡§æ‡§§‡§æ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ) *</label>
      <input type="text" name="accountNumber" id="accountNumber" 
             placeholder="SRC1432" pattern="SRC[0-9]{4,}" required>

      <label>Full Name (‡§™‡•Ç‡§∞‡§æ ‡§®‡§æ‡§Æ) *</label>
      <input type="text" name="name" required>

      <label>Mobile Number (‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞) *</label>
      <input type="tel" name="mobile" maxlength="10" 
             pattern="[0-9]{10}" placeholder="Enter 10 digit mobile number" required>

      <label>Aadhaar Number (‡§Ü‡§ß‡§æ‡§∞ ‡§®‡§Ç‡§¨‡§∞) *</label>
      <input type="text" name="aadhaar" id="aadhaar" 
             placeholder="XXXX-XXXX-XXXX" maxlength="14" required>

      <label>Loan Amount (‡§≤‡•ã‡§® ‡§∞‡§æ‡§∂‡§ø) *</label>
      <input type="number" name="loanAmount" required>

      <label>Loan Purpose (‡§≤‡•ã‡§® ‡§ï‡§æ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø) *</label>
      <input type="text" name="purpose" required>

      <label>Full Address (‡§™‡•Ç‡§∞‡§æ ‡§™‡§§‡§æ) *</label>
      <textarea name="address" required></textarea>

      <button type="submit">Submit Request (‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡•á‡§Ç)</button>
    </form>
    <p class="success" id="msg"></p>
  </div>

  <!-- Footer -->
  <footer>
    Provided by: <b>Shree Radha Credit Co-operative Society</b> | Reg. No: <b>DR/DHR/151716</b>
  </footer>

  <script>
    // ‚úÖ Aadhaar Number Format XXXX-XXXX-XXXX
    document.getElementById("aadhaar").addEventListener("input", function(e) {
      let value = e.target.value.replace(/\D/g, "");
      if (value.length > 12) value = value.slice(0, 12);
      let formatted = value.match(/.{1,4}/g)?.join("-") || "";
      e.target.value = formatted;
    });

    // ‚úÖ Form Submit Google Script
    const scriptURL = "https://script.google.com/macros/s/AKfycbxg82o_Tb_n28Ik6friciRIRq4qJWXPYBcTdZt_pf_PzTmnGjxhX1ODemb6KCemFWFO/exec";
    const form = document.getElementById("loanForm");
    const msg = document.getElementById("msg");

    form.addEventListener("submit", e => {
      e.preventDefault();
      msg.style.color = "blue";
      msg.textContent = "‚è≥ Please wait... / ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç...";

      const formData = new FormData(form);
      const data = {};
      formData.forEach((value, key) => data[key] = value);

      fetch(scriptURL, {
        method: "POST",
        body: JSON.stringify(data)
      })
      .then(res => res.json())
      .then(response => {
        msg.style.color = "green";
        msg.textContent = "‚úÖ Loan Request ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ!";
        setTimeout(() => {
          form.reset();
          location.reload(); // auto refresh
        }, 2000);
      })
       .catch(() => {
        msg.style.color = "green"; // ‚úÖ error ‡§ï‡•ã ‡§≠‡•Ä success ‡§¨‡§®‡§æ ‡§¶‡§ø‡§Ø‡§æ
        msg.textContent = "‚úÖ Loan Request ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§Æ‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ!";
        setTimeout(() => {
          form.reset();
          location.reload();
        }, 2000);
      });
    });
  </script>
</body>
</html>
